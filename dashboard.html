<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="DevIntel AI Dashboard ‚Äî Repository intelligence, sprint analytics, and team productivity metrics.">
    <title>Dashboard ‚Äî DevIntel AI</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='8' fill='%2318181b'/><text x='50%25' y='56%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-size='16' font-weight='bold' font-family='sans-serif'>D</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
</head>

<body>
    <div class="dashboard-layout">

        <!-- ===== SIDEBAR ===== -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-logo">
                <div class="logo-icon">D</div>
                <a href="index.html" class="logo-text">DevIntel AI</a>
            </div>

            <nav class="sidebar-nav">
                <span class="nav-section-label">Overview</span>
                <a class="nav-item active" data-panel="dashboard" id="nav-dashboard">
                    <span class="nav-icon">üìä</span> Dashboard
                </a>

                <span class="nav-section-label">Analytics</span>
                <a class="nav-item" data-panel="repository-analyzer" id="nav-repository-analyzer">
                    <span class="nav-icon">üì¶</span> Repository Analyzer
                </a>
                <a class="nav-item" data-panel="issue-classifier" id="nav-issue-classifier">
                    <span class="nav-icon">üè∑Ô∏è</span> Issue Classifier
                </a>
                <a class="nav-item" data-panel="pr-intelligence" id="nav-pr-intelligence">
                    <span class="nav-icon">üîç</span> PR Intelligence
                </a>
                <a class="nav-item" data-panel="assignee-recommender" id="nav-assignee-recommender">
                    <span class="nav-icon">üë§</span> Assignee Recommender
                </a>
                <a class="nav-item" data-panel="workload-analyzer" id="nav-workload-analyzer">
                    <span class="nav-icon">‚öñÔ∏è</span> Workload Analyzer
                </a>

                <span class="nav-section-label">Manage</span>
                <a class="nav-item" data-panel="history" id="nav-history">
                    <span class="nav-icon">üìú</span> History
                </a>
                <a class="nav-item" href="settings.html" id="nav-settings" target="_self">
                    <span class="nav-icon">‚öôÔ∏è</span> Settings
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="sidebar-user">
                    <div class="user-avatar">‚Äî</div>
                    <div class="user-info">
                        <div class="name">Loading‚Ä¶</div>
                        <div class="role">‚Äî</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- ===== MAIN CONTENT ===== -->
        <main class="main-content">

            <!-- Top Bar -->
            <header class="topbar" id="topbar">
                <div class="topbar-left">
                    <h2 id="page-title">Dashboard</h2>
                    <span class="topbar-breadcrumb" id="page-breadcrumb">/ Overview</span>
                </div>
                <div class="topbar-right">
                    <div class="search-box">
                        <span>üîç</span>
                        <input type="text" placeholder="Search repos, PRs, team‚Ä¶" id="search-input">
                        <kbd>‚åòK</kbd>
                    </div>
                    <a href="settings.html" class="btn-secondary"
                        style="padding: 8px 16px; border-radius: 8px; font-size: 12px;">‚öôÔ∏è Settings</a>
                    <button class="btn-secondary" id="logout-btn"
                        style="padding: 8px 16px; border-radius: 8px; font-size: 12px;">üö™ Logout</button>
                </div>
            </header>

            <!-- ============ PANEL: Dashboard (default) ============ -->
            <div class="dashboard-content panel-content" id="panel-dashboard">

                <div class="section-header">
                    <h3>Key Metrics</h3>
                    <span class="view-all">Live from GitHub</span>
                </div>
                <div class="metrics-grid" id="metrics-grid">
                    <div class="loading-state">
                        <div class="spinner"></div><br>Loading metrics‚Ä¶
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-card">
                        <h4>Merged PRs Trend</h4>
                        <p class="chart-subtitle">Recently merged pull requests by date</p>
                        <div class="chart-wrapper"><canvas id="velocityChart"></canvas></div>
                    </div>
                    <div class="chart-card">
                        <h4>Top Contributors</h4>
                        <p class="chart-subtitle">Commits in most active repository</p>
                        <div class="chart-wrapper"><canvas id="teamChart"></canvas></div>
                    </div>
                </div>

                <div class="table-card" id="prs-table">
                    <div class="table-card-header">
                        <h4>Recent Pull Requests</h4>
                        <div class="table-filter">
                            <button class="filter-btn active" id="filter-all">All</button>
                            <button class="filter-btn" id="filter-open">Open</button>
                            <button class="filter-btn" id="filter-merged">Merged</button>
                        </div>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Pull Request</th>
                                <th>Author</th>
                                <th>Status</th>
                                <th>Cycle Time</th>
                                <th>Reviews</th>
                            </tr>
                        </thead>
                        <tbody id="prs-tbody">
                            <tr>
                                <td colspan="5">
                                    <div class="loading-state">
                                        <div class="spinner"></div><br>Loading PRs‚Ä¶
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="bottom-grid">
                    <div class="table-card">
                        <div class="table-card-header">
                            <h4>Repositories</h4>
                            <span class="view-all" style="font-size:12px;color:var(--text-tertiary)">From your
                                GitHub</span>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Repository</th>
                                    <th>Status</th>
                                    <th>Language</th>
                                    <th>Stars / Forks</th>
                                    <th>Issues</th>
                                </tr>
                            </thead>
                            <tbody id="repos-tbody">
                                <tr>
                                    <td colspan="5">
                                        <div class="loading-state">
                                            <div class="spinner"></div><br>Loading repos‚Ä¶
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="activity-feed">
                        <h4>Recent Activity</h4>
                        <div id="activity-feed-body">
                            <div class="loading-state">
                                <div class="spinner"></div><br>Loading activity‚Ä¶
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ============ PANEL: Repository Analyzer ============ -->
            <div class="dashboard-content panel-content" id="panel-repository-analyzer" style="display:none">
                <div class="agent-panel">
                    <div class="agent-header">
                        <div class="agent-icon-large">üì¶</div>
                        <div>
                            <h3>Repository Analyzer Agent</h3>
                            <p class="agent-desc">Analyzes repository structure, identifies key features, technology stack, architecture patterns, and provides actionable recommendations.</p>
                        </div>
                    </div>
                    <div class="agent-input-group">
                        <input type="text" class="agent-repo-input" id="ra-repo"
                            placeholder="owner/repo (e.g. facebook/react)" autocomplete="off">
                        <button class="btn-primary agent-run-btn" id="ra-run" style="border-radius:10px">üöÄ Analyze
                            Repository</button>
                    </div>
                    <div class="agent-results" id="ra-results"></div>
                </div>
            </div>

            <!-- ============ PANEL: Issue Classifier ============ -->
            <div class="dashboard-content panel-content" id="panel-issue-classifier" style="display:none">
                <div class="agent-panel">
                    <div class="agent-header">
                        <div class="agent-icon-large">üè∑Ô∏è</div>
                        <div>
                            <h3>Issue Classification Agent</h3>
                            <p class="agent-desc">Classifies open issues as Bug / Feature / Refactor / Question with
                                priority levels and suggested labels.</p>
                        </div>
                    </div>
                    <div class="agent-input-group">
                        <input type="text" class="agent-repo-input" id="ic-repo"
                            placeholder="owner/repo (e.g. facebook/react)" autocomplete="off">
                        <button class="btn-primary agent-run-btn" id="ic-run" style="border-radius:10px">üöÄ Analyze
                            Issues</button>
                    </div>
                    <div class="agent-results" id="ic-results"></div>
                </div>
            </div>

            <!-- ============ PANEL: PR Intelligence ============ -->
            <div class="dashboard-content panel-content" id="panel-pr-intelligence" style="display:none">
                <div class="agent-panel">
                    <div class="agent-header">
                        <div class="agent-icon-large">üîç</div>
                        <div>
                            <h3>PR Intelligence Agent</h3>
                            <p class="agent-desc">Analyzes pull requests for risk level, generates summaries and review
                                checklists.</p>
                        </div>
                    </div>
                    <div class="agent-input-group">
                        <input type="text" class="agent-repo-input" id="pri-repo"
                            placeholder="owner/repo (e.g. facebook/react)" autocomplete="off">
                        <button class="btn-primary agent-run-btn" id="pri-run" style="border-radius:10px">üöÄ Analyze
                            PRs</button>
                    </div>
                    <div class="agent-results" id="pri-results"></div>
                </div>
            </div>

            <!-- ============ PANEL: Assignee Recommender ============ -->
            <div class="dashboard-content panel-content" id="panel-assignee-recommender" style="display:none">
                <div class="agent-panel">
                    <div class="agent-header">
                        <div class="agent-icon-large">üë§</div>
                        <div>
                            <h3>Assignee Recommendation Agent</h3>
                            <p class="agent-desc">Recommends the best developers to assign to each open issue based on
                                commit history and expertise.</p>
                        </div>
                    </div>
                    <div class="agent-input-group">
                        <input type="text" class="agent-repo-input" id="ar-repo"
                            placeholder="owner/repo (e.g. facebook/react)" autocomplete="off">
                        <button class="btn-primary agent-run-btn" id="ar-run" style="border-radius:10px">üöÄ Find
                            Assignees</button>
                    </div>
                    <div class="agent-results" id="ar-results"></div>
                </div>
            </div>

            <!-- ============ PANEL: Workload Analyzer ============ -->
            <div class="dashboard-content panel-content" id="panel-workload-analyzer" style="display:none">
                <div class="agent-panel">
                    <div class="agent-header">
                        <div class="agent-icon-large">‚öñÔ∏è</div>
                        <div>
                            <h3>Workload Analysis Agent</h3>
                            <p class="agent-desc">Analyzes developer workload across issues and PR reviews, with
                                AI-powered balancing recommendations.</p>
                        </div>
                    </div>
                    <div class="agent-input-group">
                        <input type="text" class="agent-repo-input" id="wa-repo"
                            placeholder="owner/repo (e.g. facebook/react)" autocomplete="off">
                        <button class="btn-primary agent-run-btn" id="wa-run" style="border-radius:10px">üöÄ Analyze
                            Workload</button>
                    </div>
                    <div class="agent-results" id="wa-results"></div>
                </div>
            </div>

        </main>
    </div>

    <script src="js/app.js"></script>
</body>

</html>

<!-- ============ PANEL: History ============ -->
<div class="dashboard-content panel-content" id="panel-history" style="display:none">
    <div class="agent-panel" style="max-width:1000px">
        <div class="agent-header">
            <div class="agent-icon-large">üìú</div>
            <div>
                <h3>Analysis History</h3>
                <p class="agent-desc">View your recent repository analyses and agent usage history.</p>
            </div>
        </div>

        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
            <div style="font-size:13px;color:var(--text-tertiary)">
                <span id="history-count">0</span> analyses in history
            </div>
            <div style="display:flex;gap:8px">
                <button class="btn-secondary" id="test-history-btn"
                    style="padding:8px 16px;border-radius:8px;font-size:12px">
                    üß™ Test Add Entry
                </button>
                <button class="btn-secondary" id="clear-history-btn"
                    style="padding:8px 16px;border-radius:8px;font-size:12px">
                    üóëÔ∏è Clear History
                </button>
            </div>
        </div>

        <div id="history-results">
            <div class="empty-state" style="padding:60px 20px">
                <div style="font-size:48px;margin-bottom:16px">üì≠</div>
                <div style="font-size:15px;color:var(--text-secondary);margin-bottom:8px">No history yet</div>
                <div style="font-size:13px;color:var(--text-tertiary)">Start analyzing repositories to see your history here</div>
            </div>
        </div>
    </div>
</div>

